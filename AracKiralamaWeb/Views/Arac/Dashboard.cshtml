@{
    ViewData["Title"] = "Yönetici Paneli";
}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    /* Dashboard Genel Tasarımı */
    .dashboard-stats {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        flex: 1;
        background: linear-gradient(135deg, #2c3e50, #000000);
        color: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s;
    }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0;
        }

        .stat-card p {
            opacity: 0.7;
            margin: 0;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

    .stat-icon {
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 3rem;
        opacity: 0.1;
    }

    /* Grafik Kutuları */
    .chart-container {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        height: 400px;
    }
</style>

<div class="container mt-4 fade-in-up">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-dark">📊 Performans Özeti</h2>
        <span class="badge bg-dark p-2">Anlık Veriler</span>
    </div>

    <div class="dashboard-stats">

        <div class="stat-card" style="border-bottom: 5px solid #2ecc71;">
            <p>Toplam Ciro</p>
            <h3>@ViewBag.ToplamKazanc ₺</h3>
            <i class="fas fa-wallet stat-icon"></i>
        </div>

        <div class="stat-card" style="border-bottom: 5px solid #3498db;">
            <p>Toplam Kiralama</p>
            <h3>@ViewBag.ToplamKiralama</h3>
            <i class="fas fa-key stat-icon"></i>
        </div>

        <div class="stat-card" style="border-bottom: 5px solid #e74c3c;">
            <p>Filodaki Araçlar</p>
            <h3>@ViewBag.ToplamArac</h3>
            <i class="fas fa-car stat-icon"></i>
        </div>

    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="chart-container">
                <h5 class="fw-bold mb-3 text-center">🏆 En Çok Kiralanan Araçlar</h5>
                <canvas id="aracChart"></canvas>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="chart-container">
                <h5 class="fw-bold mb-3 text-center">📈 Hedef Analizi</h5>
                <canvas id="gelirChart"></canvas>
            </div>
        </div>
    </div>

</div>

<script>
    // --- 1. PASTA GRAFİĞİ (Veritabanından Gelen Veri) ---
    const ctx1 = document.getElementById('aracChart').getContext('2d');

    // Backend'den gelen verileri JS dizisine çevir
    const aracIsimleri = @Html.Raw(Json.Serialize(ViewBag.AracIsimleri));
    const kiralamaSayilari = @Html.Raw(Json.Serialize(ViewBag.KiralamaSayilari));

    new Chart(ctx1, {
        type: 'doughnut', // Pasta grafik tipi
        data: {
            labels: aracIsimleri,
            datasets: [{
                label: 'Kiralama Sayısı',
                data: kiralamaSayilari,
                backgroundColor: [
                    '#3498db', '#e74c3c', '#f1c40f', '#2ecc71', '#9b59b6', '#34495e'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });

    // --- 2. BAR GRAFİĞİ (Şimdilik Görsel Örnek) ---
    const ctx2 = document.getElementById('gelirChart').getContext('2d');
    new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran'],
            datasets: [{
                label: 'Aylık Gelir (₺)',
                data: [12000, 19000, 3000, 5000, 2000, 30000], // Örnek veri
                backgroundColor: '#2c3e50',
                borderRadius: 5
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });
</script>